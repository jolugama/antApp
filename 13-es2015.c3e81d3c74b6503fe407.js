(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/+cc":function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,(function(e){return t[e]}).bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e){t.exports=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(2),i=r(8),s=r(0),a=function(){function t(e,r){var n=r.location,o=void 0===n?0:n,s=r.distance,a=void 0===s?100:s,c=r.threshold,h=void 0===c?.6:c,l=r.maxPatternLength,u=void 0===l?32:l,p=r.caseSensitive,d=void 0!==p&&p,f=r.tokenSeparator,v=void 0===f?/ +/g:f,m=r.findAllMatches,g=void 0!==m&&m,b=r.minMatchCharLength,y=void 0===b?1:b,S=r.id,k=void 0===S?null:S,x=r.keys,I=void 0===x?[]:x,O=r.shouldSort,j=void 0===O||O,w=r.getFn,M=void 0===w?i:w,A=r.sortFn,_=void 0===A?function(t,e){return t.score-e.score}:A,L=r.tokenize,$=void 0!==L&&L,C=r.matchAllTokens,T=void 0!==C&&C,F=r.includeMatches,P=void 0!==F&&F,z=r.includeScore,J=void 0!==z&&z,E=r.verbose,D=void 0!==E&&E;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:o,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:v,findAllMatches:g,minMatchCharLength:y,id:k,keys:I,includeMatches:P,includeScore:J,shouldSort:j,getFn:M,sortFn:_,verbose:D,tokenize:$,matchAllTokens:T},this.setCollection(e)}var e;return(e=[{key:"setCollection",value:function(t){return this.list=t,t}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(t,'"'));var r=this._prepareSearchers(t),n=r.tokenSearchers,o=r.fullSearcher,i=this._search(n,o),s=i.weights,a=i.results;return this._computeScore(s,a),this.options.shouldSort&&this._sort(a),e.limit&&"number"==typeof e.limit&&(a=a.slice(0,e.limit)),this._format(a)}},{key:"_prepareSearchers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[];if(this.options.tokenize)for(var r=t.split(this.options.tokenSeparator),n=0,i=r.length;n<i;n+=1)e.push(new o(r[n],this.options));return{tokenSearchers:e,fullSearcher:new o(t,this.options)}}},{key:"_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,r=this.list,n={},o=[];if("string"==typeof r[0]){for(var i=0,s=r.length;i<s;i+=1)this._analyze({key:"",value:r[i],record:i,index:i},{resultMap:n,results:o,tokenSearchers:t,fullSearcher:e});return{weights:null,results:o}}for(var a={},c=0,h=r.length;c<h;c+=1)for(var l=r[c],u=0,p=this.options.keys.length;u<p;u+=1){var d=this.options.keys[u];if("string"!=typeof d){if(a[d.name]={weight:1-d.weight||1},d.weight<=0||d.weight>1)throw new Error("Key weight has to be > 0 and <= 1");d=d.name}else a[d]={weight:1};this._analyze({key:d,value:this.options.getFn(l,d),record:l,index:c},{resultMap:n,results:o,tokenSearchers:t,fullSearcher:e})}return{weights:a,results:o}}},{key:"_analyze",value:function(t,e){var r=t.key,n=t.arrayIndex,o=void 0===n?-1:n,i=t.value,a=t.record,c=t.index,h=e.tokenSearchers,l=void 0===h?[]:h,u=e.fullSearcher,p=void 0===u?[]:u,d=e.resultMap,f=void 0===d?{}:d,v=e.results,m=void 0===v?[]:v;if(null!=i){var g=!1,b=-1,y=0;if("string"==typeof i){this._log("\nKey: ".concat(""===r?"-":r));var S=p.search(i);if(this._log('Full text: "'.concat(i,'", score: ').concat(S.score)),this.options.tokenize){for(var k=i.split(this.options.tokenSeparator),x=[],I=0;I<l.length;I+=1){var O=l[I];this._log('\nPattern: "'.concat(O.pattern,'"'));for(var j=!1,w=0;w<k.length;w+=1){var M=k[w],A=O.search(M),_={};A.isMatch?(_[M]=A.score,g=!0,j=!0,x.push(A.score)):(_[M]=1,this.options.matchAllTokens||x.push(1)),this._log('Token: "'.concat(M,'", score: ').concat(_[M]))}j&&(y+=1)}b=x[0];for(var L=x.length,$=1;$<L;$+=1)b+=x[$];this._log("Token score average:",b/=L)}var C=S.score;b>-1&&(C=(C+b)/2),this._log("Score average:",C);var T=!this.options.tokenize||!this.options.matchAllTokens||y>=l.length;if(this._log("\nCheck Matches: ".concat(T)),(g||S.isMatch)&&T){var F=f[c];F?F.output.push({key:r,arrayIndex:o,value:i,score:C,matchedIndices:S.matchedIndices}):(f[c]={item:a,output:[{key:r,arrayIndex:o,value:i,score:C,matchedIndices:S.matchedIndices}]},m.push(f[c]))}}else if(s(i))for(var P=0,z=i.length;P<z;P+=1)this._analyze({key:r,arrayIndex:P,value:i[P],record:a,index:c},{resultMap:f,results:m,tokenSearchers:l,fullSearcher:p})}}},{key:"_computeScore",value:function(t,e){this._log("\n\nComputing score:\n");for(var r=0,n=e.length;r<n;r+=1){for(var o=e[r].output,i=o.length,s=1,a=1,c=0;c<i;c+=1){var h=t?t[o[c].key].weight:1,l=(1===h?o[c].score:o[c].score||.001)*h;1!==h?a=Math.min(a,l):(o[c].nScore=l,s*=l)}e[r].score=1===a?s:a,this._log(e[r])}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e=[];if(this.options.verbose){var r=[];this._log("\n\nOutput:\n\n",JSON.stringify(t,(function(t,e){if("object"===n(e)&&null!==e){if(-1!==r.indexOf(e))return;r.push(e)}return e}))),r=null}var o=[];this.options.includeMatches&&o.push((function(t,e){var r=t.output;e.matches=[];for(var n=0,o=r.length;n<o;n+=1){var i=r[n];if(0!==i.matchedIndices.length){var s={indices:i.matchedIndices,value:i.value};i.key&&(s.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(s.arrayIndex=i.arrayIndex),e.matches.push(s)}}})),this.options.includeScore&&o.push((function(t,e){e.score=t.score}));for(var i=0,s=t.length;i<s;i+=1){var a=t[i];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),o.length){for(var c={item:a.item},h=0,l=o.length;h<l;h+=1)o[h](a,c);e.push(c)}else e.push(a.item)}return e}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();t.exports=a},function(t,e,r){var n=r(3),o=r(4),i=r(7),s=function(){function t(e,r){var n=r.location,o=void 0===n?0:n,s=r.distance,a=void 0===s?100:s,c=r.threshold,h=void 0===c?.6:c,l=r.maxPatternLength,u=void 0===l?32:l,p=r.isCaseSensitive,d=void 0!==p&&p,f=r.tokenSeparator,v=void 0===f?/ +/g:f,m=r.findAllMatches,g=void 0!==m&&m,b=r.minMatchCharLength,y=void 0===b?1:b;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:o,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:d,tokenSeparator:v,findAllMatches:g,minMatchCharLength:y},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=i(this.pattern))}var e;return(e=[{key:"search",value:function(t){if(this.options.isCaseSensitive||(t=t.toLowerCase()),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};var e=this.options;if(this.pattern.length>e.maxPatternLength)return n(t,this.pattern,e.tokenSeparator);var r=this.options;return o(t,this.pattern,this.patternAlphabet,{location:r.location,distance:r.distance,threshold:r.threshold,findAllMatches:r.findAllMatches,minMatchCharLength:r.minMatchCharLength})}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();t.exports=s},function(t,e){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,o=new RegExp(e.replace(r,"\\$&").replace(n,"|")),i=t.match(o),s=!!i,a=[];if(s)for(var c=0,h=i.length;c<h;c+=1){var l=i[c];a.push([t.indexOf(l),l.length-1])}return{score:s?.5:1,isMatch:s,matchedIndices:a}}},function(t,e,r){var n=r(5),o=r(6);t.exports=function(t,e,r,i){for(var s=i.location,a=i.distance,c=void 0===a?100:a,h=i.threshold,l=i.findAllMatches,u=void 0!==l&&l,p=i.minMatchCharLength,d=void 0===p?1:p,f=void 0===s?0:s,v=t.length,m=void 0===h?.6:h,g=t.indexOf(e,f),b=e.length,y=[],S=0;S<v;S+=1)y[S]=0;if(-1!==g){var k=n(e,{errors:0,currentLocation:g,expectedLocation:f,distance:c});if(m=Math.min(k,m),-1!==(g=t.lastIndexOf(e,f+b))){var x=n(e,{errors:0,currentLocation:g,expectedLocation:f,distance:c});m=Math.min(x,m)}}g=-1;for(var I=[],O=1,j=b+v,w=1<<(b<=31?b-1:30),M=0;M<b;M+=1){for(var A=0,_=j;A<_;)n(e,{errors:M,currentLocation:f+_,expectedLocation:f,distance:c})<=m?A=_:j=_,_=Math.floor((j-A)/2+A);j=_;var L=Math.max(1,f-_+1),$=u?v:Math.min(f+_,v)+b,C=Array($+2);C[$+1]=(1<<M)-1;for(var T=$;T>=L;T-=1){var F=T-1,P=r[t.charAt(F)];if(P&&(y[F]=1),C[T]=(C[T+1]<<1|1)&P,0!==M&&(C[T]|=(I[T+1]|I[T])<<1|1|I[T+1]),C[T]&w&&(O=n(e,{errors:M,currentLocation:F,expectedLocation:f,distance:c}))<=m){if(m=O,(g=F)<=f)break;L=Math.max(1,2*f-g)}}if(n(e,{errors:M+1,currentLocation:f,expectedLocation:f,distance:c})>m)break;I=C}return{isMatch:g>=0,score:0===O?.001:O,matchedIndices:o(y,d)}}},function(t,e){t.exports=function(t,e){var r=e.errors,n=e.currentLocation,o=e.expectedLocation,i=e.distance,s=void 0===i?100:i,a=(void 0===r?0:r)/t.length,c=Math.abs((void 0===o?0:o)-(void 0===n?0:n));return s?a+c/s:c?1:a}},function(t,e){t.exports=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],n=-1,o=-1,i=0,s=t.length;i<s;i+=1){var a=t[i];a&&-1===n?n=i:a||-1===n||((o=i-1)-n+1>=e&&r.push([n,o]),n=-1)}return t[i-1]&&i-n>=e&&r.push([n,i-1]),r}},function(t,e){t.exports=function(t){for(var e={},r=t.length,n=0;n<r;n+=1)e[t.charAt(n)]=0;for(var o=0;o<r;o+=1)e[t.charAt(o)]|=1<<r-o-1;return e}},function(t,e,r){var n=r(0);t.exports=function(t,e){return function t(e,r,o){if(r){var i=r.indexOf("."),s=r,a=null;-1!==i&&(s=r.slice(0,i),a=r.slice(i+1));var c=e[s];if(null!=c)if(a||"string"!=typeof c&&"number"!=typeof c)if(n(c))for(var h=0,l=c.length;h<l;h+=1)t(c[h],a,o);else a&&t(c,a,o);else o.push(c.toString())}else o.push(e);return o}(t,e,[])}}])},QiW8:function(t,e,r){"use strict";r.r(e);var n=r("ofXK"),o=r("TEn/"),i=r("3Pt+"),s=r("tyNb"),a=r("PCNd"),c=r("xujq"),h=r("LRne"),l=r("zp1y"),u=r("lJxs"),p=r("kt0X"),d=r("/+cc"),f=r("RWhY"),v=r("fXoL");let m=(()=>{class t{constructor(t,e,r){this.router=t,this.storeItems$=e,this.storeRoot$=r,this.nameRedux="ants",this.innerWidth=window.innerWidth}loadItems(){this.storeItems$.dispatch(c.a.loadItems())}getWidth(){return this.innerWidth}getFilteredItems(){return this.storeItems$.pipe(Object(p.u)(f.c))}getItems(t,e){let r=t.query;return r=this.removeTildes(r),Object(h.a)(r).pipe(Object(l.a)(this.storeItems$),Object(u.a)(([t,n])=>{const o=Object.values(n[this.nameRedux].items.entities);return""===r?o:new d(o,{shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:e}).search(r)}))}removeTildes(t){const e="\xc3\xc0\xc1\xc4\xc2\xc8\xc9\xcb\xca\xcc\xcd\xcf\xce\xd2\xd3\xd6\xd4\xd9\xda\xdc\xdb\xe3\xe0\xe1\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xd1\xf1\xc7\xe7";for(let r=0;r<e.length;r++)for(let n=0;n<t.length;n++)t=t.replace(e.charAt(r),"AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc".charAt(r)).toLowerCase();return t}}return t.\u0275fac=function(e){return new(e||t)(v.Tb(s.j),v.Tb(p.h),v.Tb(p.h))},t.\u0275prov=v.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=r("GLE9");const b=["page"];let y=(()=>{class t{constructor(t,e){this.antService=t,this.storeItems$=e,console.log("constructor ant page"),this.antService.loadItems()}ngOnInit(){}ngAfterViewInit(){this.page.searcherEmitter.subscribe(t=>{this.storeItems$.dispatch(c.b.searchItems({query:t.value}))}),this.antService.getFilteredItems().subscribe(t=>{console.log(t),console.log("ants",t),this.page.dataItems=t.items,this.page.data.title=this.antService.getWidth()<500?"AntsApp - Hormigas":"AntsApp - La enciclopedia de las hormigas"})}ngOnDestroy(){this.itemsSuscription$.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(v.Jb(m),v.Jb(p.h))},t.\u0275cmp=v.Db({type:t,selectors:[["app-ants-items-page"]],viewQuery:function(t,e){var r;1&t&&v.tc(b,!0),2&t&&v.ic(r=v.Yb())&&(e.page=r.first)},decls:2,vars:0,consts:[["page",""]],template:function(t,e){1&t&&v.Kb(0,"app-item-organism",null,0)},directives:[g.a],styles:[""]}),t})();var S=r("mrSG"),k=r("IzEk"),x=r("FCpV");const I=["page"];let O=(()=>{class t{constructor(t,e,r,n){this.router=t,this.antService=r,this.storeItems$=n,this.subs=e.params.pipe(Object(u.a)(t=>c.a.selectItem({id:Number(t.id)}))).subscribe(t=>{n.dispatch(t)})}ngOnInit(){}ngAfterViewInit(){this._sendData()}_sendData(){this.item$=this.storeItems$.pipe(Object(p.u)(f.d),Object(k.a)(1)),this.item$.subscribe(t=>{if(t){console.log("xxxx",t);const{images:e}=t,r=Object(S.d)(t,["images"]);let n=`${r.taxonomy.specie}`;this.antService.getWidth()>500&&(n=`${r.taxonomy.specie} - ${r.taxonomy.subfamily}`),this.page.data={title:n,description:r,images:e}}else this.antService.loadItems(),this.antService.getFilteredItems().subscribe(t=>{var e,r;(null===(r=null===(e=t)||void 0===e?void 0:e.items)||void 0===r?void 0:r.length)>0&&this._sendData()})})}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(v.Jb(s.j),v.Jb(s.a),v.Jb(m),v.Jb(p.h))},t.\u0275cmp=v.Db({type:t,selectors:[["app-ants-description-page"]],viewQuery:function(t,e){var r;1&t&&v.tc(I,!0),2&t&&v.ic(r=v.Yb())&&(e.page=r.first)},decls:2,vars:0,consts:[["page",""]],template:function(t,e){1&t&&v.Kb(0,"app-description-organism",null,0)},directives:[x.a],styles:[""]}),t})();var j=r("vFB1");const w=[{path:"filter",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Db({type:t,selectors:[["app-ants-filter-page"]],decls:1,vars:0,template:function(t,e){1&t&&v.Kb(0,"app-filter-organism")},directives:[j.a],styles:[""]}),t})(),data:{title:"Ants Filter"}},{path:":id",component:O,data:{title:"Ants Description"}},{path:"",component:y,data:{title:"Ants"}}];let M=(()=>{class t{}return t.\u0275mod=v.Hb({type:t}),t.\u0275inj=v.Gb({factory:function(e){return new(e||t)},imports:[[s.m.forChild(w),a.a],s.m]}),t})();var A=r("snw9"),_=r("tk/3");let L=(()=>{class t{constructor(t,e){this.actions$=t,this.http=e}}return t.\u0275fac=function(e){return new(e||t)(v.Tb(A.a),v.Tb(_.a))},t.\u0275prov=v.Fb({token:t,factory:t.\u0275fac}),t})();var $=r("D0XW"),C=r("eIep"),T=r("JIr8"),F=r("Kj3r"),P=r("zP0r"),z=r("vkgz"),J=r("1G5W");let E=(()=>{class t{constructor(t,e,r,n){this.actions$=t,this.store$=e,this.http=r,this.itemsService=n,this.loadItemsJSON$=Object(A.c)(()=>this.actions$.pipe(Object(A.d)(c.a.loadItems),Object(C.a)(()=>this.http.get("assets/data/ants.json").pipe(Object(u.a)(t=>c.a.loadItemsSuccess({items:t})),Object(T.a)(t=>Object(h.a)(c.a.loadItemsFailure({error:t}))))))),this.loadItemsJsonSuccess$=Object(A.c)(()=>({debounce:t=0,scheduler:e=$.a}={})=>this.actions$.pipe(Object(A.d)(c.a.loadItemsSuccess),Object(F.a)(t,e),Object(C.a)(({})=>Object(h.a)(c.b.searchItems({query:""}))))),this.search$=Object(A.c)(()=>({debounce:t=300,scheduler:e=$.a}={})=>this.actions$.pipe(Object(A.d)(c.b.searchItems),Object(F.a)(t,e),Object(C.a)(({query:t})=>{const e=this.actions$.pipe(Object(A.d)(c.b.searchItems),Object(P.a)(1));return this.itemsService.getItems({query:t},["taxonomy.specie","taxonomy.subfamily"]).pipe(Object(z.a)(t=>console.log("search$")),Object(J.a)(e),Object(z.a)(console.log),Object(u.a)(t=>c.b.searchSuccess({items:t})),Object(T.a)(t=>Object(h.a)(c.b.searchFailure({error:t.message}))))})))}}return t.\u0275fac=function(e){return new(e||t)(v.Tb(A.a),v.Tb(p.h),v.Tb(_.a),v.Tb(m))},t.\u0275prov=v.Fb({token:t,factory:t.\u0275fac}),t})();r.d(e,"AntsModule",(function(){return D}));let D=(()=>{class t{}return t.\u0275mod=v.Hb({type:t}),t.\u0275inj=v.Gb({factory:function(e){return new(e||t)},imports:[[n.b,o.D,i.a,M,a.a,p.j.forFeature(f.a,f.b),A.b.forFeature([L,E])]]}),t})()}}]);